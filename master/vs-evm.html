<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VS EVM - The Fuel Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">The Fuel Book</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Developer Quickstart</div></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="why-fuel.html"><strong aria-hidden="true">2.1.</strong> Why Fuel?</a></li><li class="chapter-item expanded "><a href="what-is-fuel.html"><strong aria-hidden="true">2.2.</strong> What is Fuel?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fuel-toolchain.html"><strong aria-hidden="true">2.2.1.</strong> Fuel toolchain</a></li></ol></li><li class="chapter-item expanded "><a href="modular-movement.html"><strong aria-hidden="true">2.3.</strong> The Modular Movement</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="monolithic.html"><strong aria-hidden="true">2.3.1.</strong> Monolithic Blockchains</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.3.2.</strong> Modular Blockchains</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.3.3.</strong> Modular Blockchain Stack</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.3.4.</strong> What is a Modular Execution Layer</div></li></ol></li><li class="chapter-item expanded "><a href="fuel-configurations.html"><strong aria-hidden="true">2.4.</strong> Fuel Configurations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="rollup.html"><strong aria-hidden="true">2.4.1.</strong> Fuel as a rollup</a></li><li class="chapter-item expanded "><a href="l1.html"><strong aria-hidden="true">2.4.2.</strong> Fuel as an L1</a></li><li class="chapter-item expanded "><a href="state-channel.html"><strong aria-hidden="true">2.4.3.</strong> Fuel as a state channel</a></li><li class="chapter-item expanded "><a href="sidechain.html"><strong aria-hidden="true">2.4.4.</strong> Fuel as a sidechain</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Technology</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Parallel Transaction Execution</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.1.</strong> State Access Lists</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.2.</strong> UTXO’s</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Fraud proofs</div></li></ol></li><li class="chapter-item expanded "><a href="fuelvm/index.html"><strong aria-hidden="true">4.</strong> The FuelVM</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fuelvm/contract_call_model.html"><strong aria-hidden="true">4.1.</strong> Contract and Call Model</a></li><li class="chapter-item expanded "><a href="fuelvm/memory_model.html"><strong aria-hidden="true">4.2.</strong> Memory Model</a></li><li class="chapter-item expanded "><a href="fuelvm/native_assets.html"><strong aria-hidden="true">4.3.</strong> Multiple Native Assets</a></li><li class="chapter-item expanded "><a href="vs-evm.html" class="active"><strong aria-hidden="true">4.4.</strong> VS EVM</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.5.</strong> VS Move</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.6.</strong> VS Solana</div></li></ol></li><li class="chapter-item expanded "><a href="sway-language.html"><strong aria-hidden="true">5.</strong> The Sway Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design-philosophy.html"><strong aria-hidden="true">5.1.</strong> Design Philosophy</a></li><li class="chapter-item expanded "><a href="sway-safety.html"><strong aria-hidden="true">5.2.</strong> Safety</a></li></ol></li><li class="chapter-item expanded "><a href="for-developers/for-developer.html"><strong aria-hidden="true">6.</strong> For Developers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="for-developers/testnet-node.html"><strong aria-hidden="true">6.1.</strong> Testnet Node</a></li><li class="chapter-item expanded "><a href="for-developers/sway.html"><strong aria-hidden="true">6.2.</strong> Sway Language</a></li><li class="chapter-item expanded "><a href="for-developers/ts-sdk.html"><strong aria-hidden="true">6.3.</strong> TypeScript SDK</a></li><li class="chapter-item expanded "><a href="for-developers/rust-sdk.html"><strong aria-hidden="true">6.4.</strong> Rust SDK</a></li><li class="chapter-item expanded "><a href="for-developers/indexer.html"><strong aria-hidden="true">6.5.</strong> Indexer</a></li><li class="chapter-item expanded "><a href="for-developers/wallet-faucet.html"><strong aria-hidden="true">6.6.</strong> Wallet &amp; Faucet</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Glossary</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Fuel Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/FuelLabs/fuel-docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="fuelvm-vs-evm-explained"><a class="header" href="#fuelvm-vs-evm-explained">FuelVM vs. EVM, Explained</a></h1>
<p>FuelVM learns from the EVM, Solana, WASM, Bitcoin, and Cosmos.</p>
<p>This page is meant to outline the ways the FuelVM differs compared to the EVM in simple terms.</p>
<h2 id="fuelvm-vs-evm"><a class="header" href="#fuelvm-vs-evm">FuelVM vs. EVM</a></h2>
<h3 id="the-fuelvm-has-a-globally-shared-memory-architecture-instead-of-context-local-memory"><a class="header" href="#the-fuelvm-has-a-globally-shared-memory-architecture-instead-of-context-local-memory">The FuelVM has a globally shared memory architecture instead of context-local memory</a></h3>
<p>The FuelVM has a globally shared memory architecture. Instead of every contract call having its own separate memory space, call data, and return data, all contract call frames share global memory. This chunk of memory is shared amongst all call frames and is globally readable. This allows you to pass data around between contracts without expensive storage and pass chunks of data without having to serialize, copy from call data to memory, etc. Read more about the FuelVM memory model <a href="./fuelvm/memory_model.html">here</a>.</p>
<h3 id="the-fuelvm-is-designed-for-fraud-provability"><a class="header" href="#the-fuelvm-is-designed-for-fraud-provability">The FuelVM is designed for fraud-provability</a></h3>
<p>The EVM is a complicated machine to construct fraud proofs for. It usually requires a second layer such as WASM or MIPS to be interpreted into a fraud provable system. Check out <a href="./why-fuel.html">User Sovereignty with Fraud Proofs</a> and <a href="./modular-movement.html#trust-minimized-light-clients">how fraud proofs unlock key functionality</a>.</p>
<h3 id="fuelvm-has-multiple-native-assets"><a class="header" href="#fuelvm-has-multiple-native-assets">FuelVM has multiple native assets</a></h3>
<p>In Ethereum, the only native asset is Ether. It’s the only one that gets first-class treatment in terms of cost and ability to be pushed and pulled through a call. In Fuel, any contract can mint its UTXO-based native asset using a set of easy asset opcodes. All of which can gain the benefits of native-level call and optimization. Read more about support for multiple native assets in <a href="https://fuellabs.github.io/sway/v0.23.0/blockchain-development/native_assets.html">the Sway docs</a>, and <a href="./fuelvm/native_assets.html">here</a>.</p>
<h3 id="fuelvm-uses-64-bit-words-instead-of-256-bit"><a class="header" href="#fuelvm-uses-64-bit-words-instead-of-256-bit">FuelVM uses 64-bit words instead of 256-bit</a></h3>
<p>Modern processors have 64-bit registers, and all of the instruction set operates on 64 bits. Those are the most efficient instructions, and when you deal with 256 bits, you’re dealing with big numbers, and since modern processors aren't made to handle those numbers natively, it means you have to do more in the software.</p>
<h3 id="the-fuelvm-is-register-based-instead-of-stack-based"><a class="header" href="#the-fuelvm-is-register-based-instead-of-stack-based">The FuelVM is register-based instead of stack-based</a></h3>
<p>Register-based VMs typically require fewer instructions to do the same work than stack-based VMs. Because every operation is priced, optimizing to reduce the number of operations needed to do the same amount of work has outsized benefits.</p>
<h3 id="the-fuelvm-is-built-with-an-atomic-utxo-paradigm-from-the-start"><a class="header" href="#the-fuelvm-is-built-with-an-atomic-utxo-paradigm-from-the-start">The FuelVM is built with an atomic UTXO paradigm from the start</a></h3>
<p>Fuel uses a system of UTXOs which enable a more efficient system fo transfer and ownership of assets, where the accounts tree doesn't have to be rebuilt every time funds are transferred.</p>
<h3 id="the-fuelvm-removes-approve-transferfrom"><a class="header" href="#the-fuelvm-removes-approve-transferfrom">The FuelVM removes <code>approve</code>, <code>transferFrom</code></a></h3>
<p>The FuelVM removes the need for approve/transferFrom UX with scripts. Unlike the EVM, the FuelVM has scripts, which allow many actions to happen from an origin sender without a contract being deployed. Read more <a href="https://github.com/FuelLabs/fuel-specs/blob/master/specs/vm/main.md#script-execution">here</a>.</p>
<h2 id="eips-implemented-in-fuel"><a class="header" href="#eips-implemented-in-fuel">EIPs Implemented in Fuel</a></h2>
<p>The FuelVM implements several EIPs that have been suggested and supported by the community but couldn't be implemented due to the need to maintain backward compatibility. Check out a non-exhaustive list, also available <a href="./what-is-fuel.html">here</a>:</p>
<table><thead><tr><th>EIP</th><th>Description</th><th>Implementation</th></tr></thead><tbody>
<tr><td><a href="https://github.com/ethereum/EIPs/issues/648">Easy Parallelizability</a></td><td>Allow transactions in the EVM to be processed in parallel by specifying what addresses they can access.</td><td>Fuel can execute transactions in parallel by using strict state access lists with our UTXO model. This allows Fuel to use of all the threads and cores of your CPU to validate transactions.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-2098">EIP-2098: Compact Signature Representation</a></td><td>Reduce signatures from 65 bytes to 64 bytes to simplify handling transactions in client code, reduce gas costs, and reduce transaction sizes.</td><td>Fuel compresses signature data by a byte, from 65 to 64 bytes.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-3074">EIP-3074: <code>AUTH</code> and <code>AUTHCALL</code> opcodes</a></td><td>Introduces two EVM instructions, <code>AUTH</code> and <code>AUTHCALL</code>, to enable batching capabilities, allowing for gas sponsoring, expirations, scripting, and beyond.</td><td>Fuel has scripts and predicates that, when combined, allow the execution of multiple calls in a single batch.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-3102">EIP-3102: Binary Trie Structure</a></td><td>Introduces binary structure and merkelization rule for the account and storage tries, which are merged into a single “state” trie. Binary tries make for smaller (~4x) proofs than hexary tries, making it the design of choice for a stateless-friendly Ethereum.</td><td>Fuel uses a binary Sparse Merkle Trie instead of a Patricia Merkle Trie, which makes for smaller proofs and results in better performance.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-4758">EIP-4758: Deactivate SELFDESTRUCT</a></td><td>Rename <code>SELFDESTRUCT</code> opcode to <code>SENDALL</code>, and only immediately move all ETH in the account to the target; no longer destroying code or storage or alters the nonce. Disabling <code>SELFDESTRUCT</code> will be a requirement for statelessness.</td><td>The FuelVM doesn't have a <code>SELFDESTRUCT</code> opcode which can complicate client implementations.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-5027">EIP-5027: Remove the limit on contract code size</a></td><td>Remove the limit on the code size so that users can deploy a large-code contract without worrying about splitting the contract into several sub-contracts. With the dramatic growth of decentralized applications, the functionalities of smart contracts are becoming more and more complicated, and thus, the sizes of newly developed contracts are steadily increasing. As a result, we are facing more issues with the 24576-bytes contract size limit.</td><td>FuelVM doesn't have a limit on the size of a single contract below their physical limits. We have an instruction that allows you to load bytecode from another contract into the current execution context, allowing you to use it as a single contract even if you have to split bytecode across multiple transactions. It'll have a single monolithic bytecode and one state. In EVM, if you spit a contract across two transactions, it's two separate contracts, and you have to do things like delegate calls to share the state between the two contracts and can't do things like jump between bytecode on each contract.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-5065">EIP-5065: Instruction for Transferring Ether</a></td><td>Add a new instruction that transfers ether to a destination address without handing over the flow of execution to it. Ethereum currently has no ideal way to transfer ether without transferring the execution flow. People have come up with reentrancy guards and similar solutions to prevent some types of attacks, but it’s not an ideal solution.</td><td>The FuelVM has <a href="https://github.com/FuelLabs/fuel-specs/blob/5dcf71f162b11fb9ce998315a7078630d78536b7/specs/vm/instruction_set.md#tr-transfer-coins-to-contract">an instruction called <code>TR</code></a>, short for transfer, which transfers a native asset to a contract but doesn't allow the receiving contract to execute logic. You might want to do this to ensure the receiving contract cannot reenter. This doesn't exist as a native, first-class instruction in the EVM- you can do this by self-destructing a contract but it's a messy workaround that only works for ETH.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-86">EIP-86: Abstraction of Transaction Origin and Signature</a> and <a href="https://eips.ethereum.org/EIPS/eip-2938">EIP-2938: Account Abstraction</a></td><td>Implements a set of changes that serve the combined purpose of “abstracting out” signature verification and nonce checking, allowing users to create “account contracts” that perform any desired signature/nonce checks instead of using the mechanism currently hard-coded into transaction processing.</td><td>FuelVM has stateless account abstraction, enabling application-layer logic to configure validity rules of transactions. On Ethereum today, a transaction is valid if the user has enough Ether, the nonce is correct, and signature is valid. With account abstraction, the user can change the validity of the transaction logic without a hard fork. This could mean changes to the signature scheme or natively locking an account behind a multisig.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-1051">EIP-1051: Overflow Checking for the EVM</a></td><td>This EIP adds overflow checking for EVM arithmetic operations and two new opcodes that check and clear the overflow flags. Since the EVM operates on mod 2^256 integers and provides no built-in overflow detection or prevention, this requires manual checks on every arithmetic operation.</td><td>Overflow checking is built into the FuelVM and can be optionally disabled.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-2803">EIP-2803: Rich Transactions</a></td><td>If a transaction has a to of address x, then the data of the transaction will be treated as EVM bytecode, and it will be executed from the context of the CALLER of the transaction (aka: the transaction signer). Many Ethereum DApps require users to approve multiple transactions to produce one effect. This results in a poor user experience and complicates the experience of interacting with DApps.</td><td>The FuelVM has scripts that implement this.</td></tr>
<tr><td><a href="https://eips.ethereum.org/EIPS/eip-2926">EIP-2926: Chunk-based Code Merkelization</a></td><td>Bytecode is currently the second contributor to block witness size after the proof hashes. Transitioning the trie from hexary to binary reduces the hash section of the witness by 3x, thereby making code the first contributor. By breaking contract code into chunks and committing to those chunks in a Merkle tree, stateless clients would only need the chunks that were touched during a given transaction to execute it.</td><td>To get a code hash on Ethereum, you hash together all the byte code. The problem is that if you want to do things with statelessness or fraud proofs, to show that this hash is valid, you have to provide all the byte code, up to 24KB per contract. This EIP suggests we should merkalize it instead of hashing. The FuelVM implements this by having code roots instead of code hashes.</td></tr>
</tbody></table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="fuelvm/native_assets.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="sway-language.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="fuelvm/native_assets.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="sway-language.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
